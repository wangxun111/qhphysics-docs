<?xml version="1.0" encoding="UTF-8"?>
<svg width="1500" height="1200" viewBox="0 0 1500 1200" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Spring/Bend inheritance and call sites">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#333" />
    </marker>
  </defs>

  <style>
    .node { fill: #f9f9f9; stroke: #333; stroke-width: 1; }
    .edge { stroke: #333; stroke-width: 1.2; fill: none; }
    .label { font-family: Arial, sans-serif; font-size: 13px; fill: #111; }
    .title { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #111; }
    .lane { fill: #ffffff; stroke: #bbb; stroke-width: 1; }
  </style>

  <!-- Lanes -->
  <rect class="lane" x="40" y="40" width="680" height="1120" rx="8" />
  <rect class="lane" x="780" y="40" width="680" height="1120" rx="8" />
  <text class="title" x="380" y="30" text-anchor="middle">Inheritance Chain</text>
  <text class="title" x="1120" y="30" text-anchor="middle">Call-Site Flow</text>

  <!-- Inheritance Chain -->
  <rect class="node" x="240" y="80" width="280" height="40" rx="6" />
  <text class="label" x="380" y="105" text-anchor="middle">ConnectionBase</text>

  <path class="edge" marker-end="url(#arrow)" d="M380 120 L380 160" />
  <rect class="node" x="240" y="160" width="280" height="40" rx="6" />
  <text class="label" x="380" y="185" text-anchor="middle">Spring</text>

  <path class="edge" marker-end="url(#arrow)" d="M380 220 L380 260" />
  <rect class="node" x="240" y="260" width="280" height="40" rx="6" />
  <text class="label" x="380" y="285" text-anchor="middle">Bend</text>

  <path class="edge" marker-end="url(#arrow)" d="M380 320 L380 360" />
  <rect class="node" x="240" y="360" width="280" height="40" rx="6" />
  <text class="label" x="380" y="385" text-anchor="middle">(Other ConnectionBase children)</text>

  <!-- Verlet branch -->
  <rect class="node" x="120" y="460" width="520" height="40" rx="6" />
  <text class="label" x="380" y="485" text-anchor="middle">VerletConstraint (extends ConnectionBase)</text>

  <path class="edge" marker-end="url(#arrow)" d="M380 500 L380 540" />
  <rect class="node" x="160" y="540" width="200" height="40" rx="6" />
  <text class="label" x="260" y="565" text-anchor="middle">VerletSpring</text>

  <rect class="node" x="400" y="540" width="200" height="40" rx="6" />
  <text class="label" x="500" y="565" text-anchor="middle">VerletBend</text>

  <!-- Call-Site Flow -->
  <rect class="node" x="940" y="80" width="360" height="40" rx="6" />
  <text class="label" x="1120" y="105" text-anchor="middle">SimulationSystem.Solve()</text>

  <path class="edge" marker-end="url(#arrow)" d="M1120 120 L1120 160" />
  <rect class="node" x="940" y="160" width="360" height="40" rx="6" />
  <text class="label" x="1120" y="185" text-anchor="middle">ArrayConnections[i].Solve()</text>

  <path class="edge" marker-end="url(#arrow)" d="M1120 200 L1120 240" />
  <rect class="node" x="940" y="240" width="360" height="40" rx="6" />
  <text class="label" x="1120" y="265" text-anchor="middle">Spring.Solve / Bend.Solve</text>

  <path class="edge" marker-end="url(#arrow)" d="M1120 300 L1120 340" />
  <rect class="node" x="940" y="340" width="360" height="40" rx="6" />
  <text class="label" x="1120" y="365" text-anchor="middle">SimulationSystem.SatisfyVerletConstraints()</text>

  <path class="edge" marker-end="url(#arrow)" d="M1120 380 L1120 420" />
  <rect class="node" x="940" y="420" width="360" height="40" rx="6" />
  <text class="label" x="1120" y="445" text-anchor="middle">ArrayVerletConstraints[j].Satisfy()</text>

  <path class="edge" marker-end="url(#arrow)" d="M1120 460 L1120 500" />
  <rect class="node" x="940" y="500" width="360" height="40" rx="6" />
  <text class="label" x="1120" y="525" text-anchor="middle">VerletSpring.Satisfy / VerletBend.Satisfy</text>

  <path class="edge" marker-end="url(#arrow)" d="M1120 560 L1120 600" />
  <rect class="node" x="940" y="600" width="360" height="40" rx="6" />
  <text class="label" x="1120" y="625" text-anchor="middle">VerletSpring.Solve / VerletBend.Solve</text>

  <!-- Creation call site -->
  <rect class="node" x="940" y="700" width="360" height="40" rx="6" />
  <text class="label" x="1120" y="725" text-anchor="middle">VerletObject.cs: new VerletSpring(...)</text>

  <path class="edge" marker-end="url(#arrow)" d="M1120 640 L1120 700" />
</svg>

